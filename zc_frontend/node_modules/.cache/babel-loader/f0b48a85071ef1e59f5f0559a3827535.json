{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Parser = void 0;\n\nvar Tokenizer_1 = __importDefault(require(\"./Tokenizer\"));\n\nvar formTags = new Set([\"input\", \"option\", \"optgroup\", \"select\", \"button\", \"datalist\", \"textarea\"]);\nvar pTag = new Set([\"p\"]);\nvar openImpliesClose = {\n  tr: new Set([\"tr\", \"th\", \"td\"]),\n  th: new Set([\"th\"]),\n  td: new Set([\"thead\", \"th\", \"td\"]),\n  body: new Set([\"head\", \"link\", \"script\"]),\n  li: new Set([\"li\"]),\n  p: pTag,\n  h1: pTag,\n  h2: pTag,\n  h3: pTag,\n  h4: pTag,\n  h5: pTag,\n  h6: pTag,\n  select: formTags,\n  input: formTags,\n  output: formTags,\n  button: formTags,\n  datalist: formTags,\n  textarea: formTags,\n  option: new Set([\"option\"]),\n  optgroup: new Set([\"optgroup\", \"option\"]),\n  dd: new Set([\"dt\", \"dd\"]),\n  dt: new Set([\"dt\", \"dd\"]),\n  address: pTag,\n  article: pTag,\n  aside: pTag,\n  blockquote: pTag,\n  details: pTag,\n  div: pTag,\n  dl: pTag,\n  fieldset: pTag,\n  figcaption: pTag,\n  figure: pTag,\n  footer: pTag,\n  form: pTag,\n  header: pTag,\n  hr: pTag,\n  main: pTag,\n  nav: pTag,\n  ol: pTag,\n  pre: pTag,\n  section: pTag,\n  table: pTag,\n  ul: pTag,\n  rt: new Set([\"rt\", \"rp\"]),\n  rp: new Set([\"rt\", \"rp\"]),\n  tbody: new Set([\"thead\", \"tbody\"]),\n  tfoot: new Set([\"thead\", \"tbody\"])\n};\nvar voidElements = new Set([\"area\", \"base\", \"basefont\", \"br\", \"col\", \"command\", \"embed\", \"frame\", \"hr\", \"img\", \"input\", \"isindex\", \"keygen\", \"link\", \"meta\", \"param\", \"source\", \"track\", \"wbr\"]);\nvar foreignContextElements = new Set([\"math\", \"svg\"]);\nvar htmlIntegrationElements = new Set([\"mi\", \"mo\", \"mn\", \"ms\", \"mtext\", \"annotation-xml\", \"foreignObject\", \"desc\", \"title\"]);\nvar reNameEnd = /\\s|\\//;\n\nvar Parser =\n/** @class */\nfunction () {\n  function Parser(cbs, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _a, _b, _c, _d, _e;\n    /** The start index of the last event. */\n\n\n    this.startIndex = 0;\n    /** The end index of the last event. */\n\n    this.endIndex = null;\n    this.tagname = \"\";\n    this.attribname = \"\";\n    this.attribvalue = \"\";\n    this.attribs = null;\n    this.stack = [];\n    this.foreignContext = [];\n    this.options = options;\n    this.cbs = cbs !== null && cbs !== void 0 ? cbs : {};\n    this.lowerCaseTagNames = (_a = options.lowerCaseTags) !== null && _a !== void 0 ? _a : !options.xmlMode;\n    this.lowerCaseAttributeNames = (_b = options.lowerCaseAttributeNames) !== null && _b !== void 0 ? _b : !options.xmlMode;\n    this.tokenizer = new ((_c = options.Tokenizer) !== null && _c !== void 0 ? _c : Tokenizer_1.default)(this.options, this);\n    (_e = (_d = this.cbs).onparserinit) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n  }\n\n  Parser.prototype.updatePosition = function (initialOffset) {\n    if (this.endIndex === null) {\n      if (this.tokenizer.sectionStart <= initialOffset) {\n        this.startIndex = 0;\n      } else {\n        this.startIndex = this.tokenizer.sectionStart - initialOffset;\n      }\n    } else {\n      this.startIndex = this.endIndex + 1;\n    }\n\n    this.endIndex = this.tokenizer.getAbsoluteIndex();\n  }; // Tokenizer event handlers\n\n\n  Parser.prototype.ontext = function (data) {\n    var _a, _b;\n\n    this.updatePosition(1);\n    this.endIndex--;\n    (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, data);\n  };\n\n  Parser.prototype.onopentagname = function (name) {\n    var _a, _b;\n\n    if (this.lowerCaseTagNames) {\n      name = name.toLowerCase();\n    }\n\n    this.tagname = name;\n\n    if (!this.options.xmlMode && Object.prototype.hasOwnProperty.call(openImpliesClose, name)) {\n      var el = void 0;\n\n      while (this.stack.length > 0 && openImpliesClose[name].has(el = this.stack[this.stack.length - 1])) {\n        this.onclosetag(el);\n      }\n    }\n\n    if (this.options.xmlMode || !voidElements.has(name)) {\n      this.stack.push(name);\n\n      if (foreignContextElements.has(name)) {\n        this.foreignContext.push(true);\n      } else if (htmlIntegrationElements.has(name)) {\n        this.foreignContext.push(false);\n      }\n    }\n\n    (_b = (_a = this.cbs).onopentagname) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n    if (this.cbs.onopentag) this.attribs = {};\n  };\n\n  Parser.prototype.onopentagend = function () {\n    var _a, _b;\n\n    this.updatePosition(1);\n\n    if (this.attribs) {\n      (_b = (_a = this.cbs).onopentag) === null || _b === void 0 ? void 0 : _b.call(_a, this.tagname, this.attribs);\n      this.attribs = null;\n    }\n\n    if (!this.options.xmlMode && this.cbs.onclosetag && voidElements.has(this.tagname)) {\n      this.cbs.onclosetag(this.tagname);\n    }\n\n    this.tagname = \"\";\n  };\n\n  Parser.prototype.onclosetag = function (name) {\n    this.updatePosition(1);\n\n    if (this.lowerCaseTagNames) {\n      name = name.toLowerCase();\n    }\n\n    if (foreignContextElements.has(name) || htmlIntegrationElements.has(name)) {\n      this.foreignContext.pop();\n    }\n\n    if (this.stack.length && (this.options.xmlMode || !voidElements.has(name))) {\n      var pos = this.stack.lastIndexOf(name);\n\n      if (pos !== -1) {\n        if (this.cbs.onclosetag) {\n          pos = this.stack.length - pos;\n\n          while (pos--) {\n            // We know the stack has sufficient elements.\n            this.cbs.onclosetag(this.stack.pop());\n          }\n        } else this.stack.length = pos;\n      } else if (name === \"p\" && !this.options.xmlMode) {\n        this.onopentagname(name);\n        this.closeCurrentTag();\n      }\n    } else if (!this.options.xmlMode && (name === \"br\" || name === \"p\")) {\n      this.onopentagname(name);\n      this.closeCurrentTag();\n    }\n  };\n\n  Parser.prototype.onselfclosingtag = function () {\n    if (this.options.xmlMode || this.options.recognizeSelfClosing || this.foreignContext[this.foreignContext.length - 1]) {\n      this.closeCurrentTag();\n    } else {\n      this.onopentagend();\n    }\n  };\n\n  Parser.prototype.closeCurrentTag = function () {\n    var _a, _b;\n\n    var name = this.tagname;\n    this.onopentagend();\n    /*\n     * Self-closing tags will be on the top of the stack\n     * (cheaper check than in onclosetag)\n     */\n\n    if (this.stack[this.stack.length - 1] === name) {\n      (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n      this.stack.pop();\n    }\n  };\n\n  Parser.prototype.onattribname = function (name) {\n    if (this.lowerCaseAttributeNames) {\n      name = name.toLowerCase();\n    }\n\n    this.attribname = name;\n  };\n\n  Parser.prototype.onattribdata = function (value) {\n    this.attribvalue += value;\n  };\n\n  Parser.prototype.onattribend = function (quote) {\n    var _a, _b;\n\n    (_b = (_a = this.cbs).onattribute) === null || _b === void 0 ? void 0 : _b.call(_a, this.attribname, this.attribvalue, quote);\n\n    if (this.attribs && !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname)) {\n      this.attribs[this.attribname] = this.attribvalue;\n    }\n\n    this.attribname = \"\";\n    this.attribvalue = \"\";\n  };\n\n  Parser.prototype.getInstructionName = function (value) {\n    var idx = value.search(reNameEnd);\n    var name = idx < 0 ? value : value.substr(0, idx);\n\n    if (this.lowerCaseTagNames) {\n      name = name.toLowerCase();\n    }\n\n    return name;\n  };\n\n  Parser.prototype.ondeclaration = function (value) {\n    if (this.cbs.onprocessinginstruction) {\n      var name_1 = this.getInstructionName(value);\n      this.cbs.onprocessinginstruction(\"!\" + name_1, \"!\" + value);\n    }\n  };\n\n  Parser.prototype.onprocessinginstruction = function (value) {\n    if (this.cbs.onprocessinginstruction) {\n      var name_2 = this.getInstructionName(value);\n      this.cbs.onprocessinginstruction(\"?\" + name_2, \"?\" + value);\n    }\n  };\n\n  Parser.prototype.oncomment = function (value) {\n    var _a, _b, _c, _d;\n\n    this.updatePosition(4);\n    (_b = (_a = this.cbs).oncomment) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    (_d = (_c = this.cbs).oncommentend) === null || _d === void 0 ? void 0 : _d.call(_c);\n  };\n\n  Parser.prototype.oncdata = function (value) {\n    var _a, _b, _c, _d, _e, _f;\n\n    this.updatePosition(1);\n\n    if (this.options.xmlMode || this.options.recognizeCDATA) {\n      (_b = (_a = this.cbs).oncdatastart) === null || _b === void 0 ? void 0 : _b.call(_a);\n      (_d = (_c = this.cbs).ontext) === null || _d === void 0 ? void 0 : _d.call(_c, value);\n      (_f = (_e = this.cbs).oncdataend) === null || _f === void 0 ? void 0 : _f.call(_e);\n    } else {\n      this.oncomment(\"[CDATA[\" + value + \"]]\");\n    }\n  };\n\n  Parser.prototype.onerror = function (err) {\n    var _a, _b;\n\n    (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n  };\n\n  Parser.prototype.onend = function () {\n    var _a, _b;\n\n    if (this.cbs.onclosetag) {\n      for (var i = this.stack.length; i > 0; this.cbs.onclosetag(this.stack[--i])) {\n        ;\n      }\n    }\n\n    (_b = (_a = this.cbs).onend) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n  /**\n   * Resets the parser to a blank state, ready to parse a new HTML document\n   */\n\n\n  Parser.prototype.reset = function () {\n    var _a, _b, _c, _d;\n\n    (_b = (_a = this.cbs).onreset) === null || _b === void 0 ? void 0 : _b.call(_a);\n    this.tokenizer.reset();\n    this.tagname = \"\";\n    this.attribname = \"\";\n    this.attribs = null;\n    this.stack = [];\n    (_d = (_c = this.cbs).onparserinit) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n  };\n  /**\n   * Resets the parser, then parses a complete document and\n   * pushes it to the handler.\n   *\n   * @param data Document to parse.\n   */\n\n\n  Parser.prototype.parseComplete = function (data) {\n    this.reset();\n    this.end(data);\n  };\n  /**\n   * Parses a chunk of data and calls the corresponding callbacks.\n   *\n   * @param chunk Chunk to parse.\n   */\n\n\n  Parser.prototype.write = function (chunk) {\n    this.tokenizer.write(chunk);\n  };\n  /**\n   * Parses the end of the buffer and clears the stack, calls onend.\n   *\n   * @param chunk Optional final chunk to parse.\n   */\n\n\n  Parser.prototype.end = function (chunk) {\n    this.tokenizer.end(chunk);\n  };\n  /**\n   * Pauses parsing. The parser won't emit events until `resume` is called.\n   */\n\n\n  Parser.prototype.pause = function () {\n    this.tokenizer.pause();\n  };\n  /**\n   * Resumes parsing after `pause` was called.\n   */\n\n\n  Parser.prototype.resume = function () {\n    this.tokenizer.resume();\n  };\n  /**\n   * Alias of `write`, for backwards compatibility.\n   *\n   * @param chunk Chunk to parse.\n   * @deprecated\n   */\n\n\n  Parser.prototype.parseChunk = function (chunk) {\n    this.write(chunk);\n  };\n  /**\n   * Alias of `end`, for backwards compatibility.\n   *\n   * @param chunk Optional final chunk to parse.\n   * @deprecated\n   */\n\n\n  Parser.prototype.done = function (chunk) {\n    this.end(chunk);\n  };\n\n  return Parser;\n}();\n\nexports.Parser = Parser;","map":{"version":3,"sources":["/home/samuel/Documents/Zuri project/zc_main/zc_frontend/node_modules/htmlparser2/lib/Parser.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Parser","Tokenizer_1","require","formTags","Set","pTag","openImpliesClose","tr","th","td","body","li","p","h1","h2","h3","h4","h5","h6","select","input","output","button","datalist","textarea","option","optgroup","dd","dt","address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","header","hr","main","nav","ol","pre","section","table","ul","rt","rp","tbody","tfoot","voidElements","foreignContextElements","htmlIntegrationElements","reNameEnd","cbs","options","_a","_b","_c","_d","_e","startIndex","endIndex","tagname","attribname","attribvalue","attribs","stack","foreignContext","lowerCaseTagNames","lowerCaseTags","xmlMode","lowerCaseAttributeNames","tokenizer","Tokenizer","default","onparserinit","call","prototype","updatePosition","initialOffset","sectionStart","getAbsoluteIndex","ontext","data","onopentagname","name","toLowerCase","hasOwnProperty","el","length","has","onclosetag","push","onopentag","onopentagend","pop","pos","lastIndexOf","closeCurrentTag","onselfclosingtag","recognizeSelfClosing","onattribname","onattribdata","onattribend","quote","onattribute","getInstructionName","idx","search","substr","ondeclaration","onprocessinginstruction","name_1","name_2","oncomment","oncommentend","oncdata","_f","recognizeCDATA","oncdatastart","oncdataend","onerror","err","onend","i","reset","onreset","parseComplete","end","write","chunk","pause","resume","parseChunk","done"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = void 0;\nvar Tokenizer_1 = __importDefault(require(\"./Tokenizer\"));\nvar formTags = new Set([\n    \"input\",\n    \"option\",\n    \"optgroup\",\n    \"select\",\n    \"button\",\n    \"datalist\",\n    \"textarea\",\n]);\nvar pTag = new Set([\"p\"]);\nvar openImpliesClose = {\n    tr: new Set([\"tr\", \"th\", \"td\"]),\n    th: new Set([\"th\"]),\n    td: new Set([\"thead\", \"th\", \"td\"]),\n    body: new Set([\"head\", \"link\", \"script\"]),\n    li: new Set([\"li\"]),\n    p: pTag,\n    h1: pTag,\n    h2: pTag,\n    h3: pTag,\n    h4: pTag,\n    h5: pTag,\n    h6: pTag,\n    select: formTags,\n    input: formTags,\n    output: formTags,\n    button: formTags,\n    datalist: formTags,\n    textarea: formTags,\n    option: new Set([\"option\"]),\n    optgroup: new Set([\"optgroup\", \"option\"]),\n    dd: new Set([\"dt\", \"dd\"]),\n    dt: new Set([\"dt\", \"dd\"]),\n    address: pTag,\n    article: pTag,\n    aside: pTag,\n    blockquote: pTag,\n    details: pTag,\n    div: pTag,\n    dl: pTag,\n    fieldset: pTag,\n    figcaption: pTag,\n    figure: pTag,\n    footer: pTag,\n    form: pTag,\n    header: pTag,\n    hr: pTag,\n    main: pTag,\n    nav: pTag,\n    ol: pTag,\n    pre: pTag,\n    section: pTag,\n    table: pTag,\n    ul: pTag,\n    rt: new Set([\"rt\", \"rp\"]),\n    rp: new Set([\"rt\", \"rp\"]),\n    tbody: new Set([\"thead\", \"tbody\"]),\n    tfoot: new Set([\"thead\", \"tbody\"]),\n};\nvar voidElements = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\nvar foreignContextElements = new Set([\"math\", \"svg\"]);\nvar htmlIntegrationElements = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar reNameEnd = /\\s|\\//;\nvar Parser = /** @class */ (function () {\n    function Parser(cbs, options) {\n        if (options === void 0) { options = {}; }\n        var _a, _b, _c, _d, _e;\n        /** The start index of the last event. */\n        this.startIndex = 0;\n        /** The end index of the last event. */\n        this.endIndex = null;\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n        this.attribs = null;\n        this.stack = [];\n        this.foreignContext = [];\n        this.options = options;\n        this.cbs = cbs !== null && cbs !== void 0 ? cbs : {};\n        this.lowerCaseTagNames = (_a = options.lowerCaseTags) !== null && _a !== void 0 ? _a : !options.xmlMode;\n        this.lowerCaseAttributeNames =\n            (_b = options.lowerCaseAttributeNames) !== null && _b !== void 0 ? _b : !options.xmlMode;\n        this.tokenizer = new ((_c = options.Tokenizer) !== null && _c !== void 0 ? _c : Tokenizer_1.default)(this.options, this);\n        (_e = (_d = this.cbs).onparserinit) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n    }\n    Parser.prototype.updatePosition = function (initialOffset) {\n        if (this.endIndex === null) {\n            if (this.tokenizer.sectionStart <= initialOffset) {\n                this.startIndex = 0;\n            }\n            else {\n                this.startIndex = this.tokenizer.sectionStart - initialOffset;\n            }\n        }\n        else {\n            this.startIndex = this.endIndex + 1;\n        }\n        this.endIndex = this.tokenizer.getAbsoluteIndex();\n    };\n    // Tokenizer event handlers\n    Parser.prototype.ontext = function (data) {\n        var _a, _b;\n        this.updatePosition(1);\n        this.endIndex--;\n        (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, data);\n    };\n    Parser.prototype.onopentagname = function (name) {\n        var _a, _b;\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        this.tagname = name;\n        if (!this.options.xmlMode &&\n            Object.prototype.hasOwnProperty.call(openImpliesClose, name)) {\n            var el = void 0;\n            while (this.stack.length > 0 &&\n                openImpliesClose[name].has((el = this.stack[this.stack.length - 1]))) {\n                this.onclosetag(el);\n            }\n        }\n        if (this.options.xmlMode || !voidElements.has(name)) {\n            this.stack.push(name);\n            if (foreignContextElements.has(name)) {\n                this.foreignContext.push(true);\n            }\n            else if (htmlIntegrationElements.has(name)) {\n                this.foreignContext.push(false);\n            }\n        }\n        (_b = (_a = this.cbs).onopentagname) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n        if (this.cbs.onopentag)\n            this.attribs = {};\n    };\n    Parser.prototype.onopentagend = function () {\n        var _a, _b;\n        this.updatePosition(1);\n        if (this.attribs) {\n            (_b = (_a = this.cbs).onopentag) === null || _b === void 0 ? void 0 : _b.call(_a, this.tagname, this.attribs);\n            this.attribs = null;\n        }\n        if (!this.options.xmlMode &&\n            this.cbs.onclosetag &&\n            voidElements.has(this.tagname)) {\n            this.cbs.onclosetag(this.tagname);\n        }\n        this.tagname = \"\";\n    };\n    Parser.prototype.onclosetag = function (name) {\n        this.updatePosition(1);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        if (foreignContextElements.has(name) ||\n            htmlIntegrationElements.has(name)) {\n            this.foreignContext.pop();\n        }\n        if (this.stack.length &&\n            (this.options.xmlMode || !voidElements.has(name))) {\n            var pos = this.stack.lastIndexOf(name);\n            if (pos !== -1) {\n                if (this.cbs.onclosetag) {\n                    pos = this.stack.length - pos;\n                    while (pos--) {\n                        // We know the stack has sufficient elements.\n                        this.cbs.onclosetag(this.stack.pop());\n                    }\n                }\n                else\n                    this.stack.length = pos;\n            }\n            else if (name === \"p\" && !this.options.xmlMode) {\n                this.onopentagname(name);\n                this.closeCurrentTag();\n            }\n        }\n        else if (!this.options.xmlMode && (name === \"br\" || name === \"p\")) {\n            this.onopentagname(name);\n            this.closeCurrentTag();\n        }\n    };\n    Parser.prototype.onselfclosingtag = function () {\n        if (this.options.xmlMode ||\n            this.options.recognizeSelfClosing ||\n            this.foreignContext[this.foreignContext.length - 1]) {\n            this.closeCurrentTag();\n        }\n        else {\n            this.onopentagend();\n        }\n    };\n    Parser.prototype.closeCurrentTag = function () {\n        var _a, _b;\n        var name = this.tagname;\n        this.onopentagend();\n        /*\n         * Self-closing tags will be on the top of the stack\n         * (cheaper check than in onclosetag)\n         */\n        if (this.stack[this.stack.length - 1] === name) {\n            (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n            this.stack.pop();\n        }\n    };\n    Parser.prototype.onattribname = function (name) {\n        if (this.lowerCaseAttributeNames) {\n            name = name.toLowerCase();\n        }\n        this.attribname = name;\n    };\n    Parser.prototype.onattribdata = function (value) {\n        this.attribvalue += value;\n    };\n    Parser.prototype.onattribend = function (quote) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onattribute) === null || _b === void 0 ? void 0 : _b.call(_a, this.attribname, this.attribvalue, quote);\n        if (this.attribs &&\n            !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname)) {\n            this.attribs[this.attribname] = this.attribvalue;\n        }\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n    };\n    Parser.prototype.getInstructionName = function (value) {\n        var idx = value.search(reNameEnd);\n        var name = idx < 0 ? value : value.substr(0, idx);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        return name;\n    };\n    Parser.prototype.ondeclaration = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_1 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"!\" + name_1, \"!\" + value);\n        }\n    };\n    Parser.prototype.onprocessinginstruction = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_2 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"?\" + name_2, \"?\" + value);\n        }\n    };\n    Parser.prototype.oncomment = function (value) {\n        var _a, _b, _c, _d;\n        this.updatePosition(4);\n        (_b = (_a = this.cbs).oncomment) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n        (_d = (_c = this.cbs).oncommentend) === null || _d === void 0 ? void 0 : _d.call(_c);\n    };\n    Parser.prototype.oncdata = function (value) {\n        var _a, _b, _c, _d, _e, _f;\n        this.updatePosition(1);\n        if (this.options.xmlMode || this.options.recognizeCDATA) {\n            (_b = (_a = this.cbs).oncdatastart) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_d = (_c = this.cbs).ontext) === null || _d === void 0 ? void 0 : _d.call(_c, value);\n            (_f = (_e = this.cbs).oncdataend) === null || _f === void 0 ? void 0 : _f.call(_e);\n        }\n        else {\n            this.oncomment(\"[CDATA[\" + value + \"]]\");\n        }\n    };\n    Parser.prototype.onerror = function (err) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    Parser.prototype.onend = function () {\n        var _a, _b;\n        if (this.cbs.onclosetag) {\n            for (var i = this.stack.length; i > 0; this.cbs.onclosetag(this.stack[--i]))\n                ;\n        }\n        (_b = (_a = this.cbs).onend) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    /**\n     * Resets the parser to a blank state, ready to parse a new HTML document\n     */\n    Parser.prototype.reset = function () {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.cbs).onreset) === null || _b === void 0 ? void 0 : _b.call(_a);\n        this.tokenizer.reset();\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribs = null;\n        this.stack = [];\n        (_d = (_c = this.cbs).onparserinit) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n    };\n    /**\n     * Resets the parser, then parses a complete document and\n     * pushes it to the handler.\n     *\n     * @param data Document to parse.\n     */\n    Parser.prototype.parseComplete = function (data) {\n        this.reset();\n        this.end(data);\n    };\n    /**\n     * Parses a chunk of data and calls the corresponding callbacks.\n     *\n     * @param chunk Chunk to parse.\n     */\n    Parser.prototype.write = function (chunk) {\n        this.tokenizer.write(chunk);\n    };\n    /**\n     * Parses the end of the buffer and clears the stack, calls onend.\n     *\n     * @param chunk Optional final chunk to parse.\n     */\n    Parser.prototype.end = function (chunk) {\n        this.tokenizer.end(chunk);\n    };\n    /**\n     * Pauses parsing. The parser won't emit events until `resume` is called.\n     */\n    Parser.prototype.pause = function () {\n        this.tokenizer.pause();\n    };\n    /**\n     * Resumes parsing after `pause` was called.\n     */\n    Parser.prototype.resume = function () {\n        this.tokenizer.resume();\n    };\n    /**\n     * Alias of `write`, for backwards compatibility.\n     *\n     * @param chunk Chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.parseChunk = function (chunk) {\n        this.write(chunk);\n    };\n    /**\n     * Alias of `end`, for backwards compatibility.\n     *\n     * @param chunk Optional final chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.done = function (chunk) {\n        this.end(chunk);\n    };\n    return Parser;\n}());\nexports.Parser = Parser;\n"]},"metadata":{},"sourceType":"script"}